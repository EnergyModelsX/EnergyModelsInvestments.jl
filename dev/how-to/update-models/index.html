<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Update models · EnergyModelsInvestments</title><meta name="title" content="Update models · EnergyModelsInvestments"/><meta property="og:title" content="Update models · EnergyModelsInvestments"/><meta property="twitter:title" content="Update models · EnergyModelsInvestments"/><meta name="description" content="Documentation for EnergyModelsInvestments."/><meta property="og:description" content="Documentation for EnergyModelsInvestments."/><meta property="twitter:description" content="Documentation for EnergyModelsInvestments."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EnergyModelsInvestments</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/quick-start/">Quick Start</a></li><li><a class="tocitem" href="../../manual/philosophy/">Philosophy</a></li><li><a class="tocitem" href="../../manual/optimization-variables/">Optimization variables</a></li><li><a class="tocitem" href="../../manual/simple-example/">Example</a></li><li><a class="tocitem" href="../../manual/NEWS/">Release notes</a></li></ul></li><li><span class="tocitem">How to</span><ul><li class="is-active"><a class="tocitem" href>Update models</a><ul class="internal"><li><a class="tocitem" href="#Adjustments-from-0.5.x"><span>Adjustments from 0.5.x</span></a></li></ul></li><li><a class="tocitem" href="../contribute/">Contribute to EnergyModelsInvestments</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../library/public/">Public</a></li><li><a class="tocitem" href="../../library/internals/">Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">How to</a></li><li class="is-active"><a href>Update models</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Update models</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsInvestments.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsInvestments.jl/blob/main/docs/src/how-to/update-models.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="sec_how_to_update"><a class="docs-heading-anchor" href="#sec_how_to_update">Update your model to the latest versions</a><a id="sec_how_to_update-1"></a><a class="docs-heading-anchor-permalink" href="#sec_how_to_update" title="Permalink"></a></h1><p><code>EnergyModelsInvestments</code> is still in a pre-release version. Hence, there are frequently breaking changes occuring, although we plan to keep backwards compatibility. This document is designed to provide users with information regarding how they have to adjust their models to keep compatibility to the latest changes. We will as well implement information regarding the adjustment of extension packages, although this is more difficult due to the vast majority of potential changes.</p><h2 id="Adjustments-from-0.5.x"><a class="docs-heading-anchor" href="#Adjustments-from-0.5.x">Adjustments from 0.5.x</a><a id="Adjustments-from-0.5.x-1"></a><a class="docs-heading-anchor-permalink" href="#Adjustments-from-0.5.x" title="Permalink"></a></h2><h3 id="Key-changes-for-investment-type-descriptions"><a class="docs-heading-anchor" href="#Key-changes-for-investment-type-descriptions">Key changes for investment type descriptions</a><a id="Key-changes-for-investment-type-descriptions-1"></a><a class="docs-heading-anchor-permalink" href="#Key-changes-for-investment-type-descriptions" title="Permalink"></a></h3><p>Version 0.7 in <code>EnergyModelsBase</code> introduced the potential to have charge and discharge capacities through <em>storage parameters</em>. This required hence a rework of how we model investments into storage nodes. We decided to use this requirement as potential for a full rework of the investment options, increasing the latter potential make <code>EnergyModelsInvestments</code> independent of <code>EnergyModelsBase</code>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The legacy constructors for calls of the composite type of version 0.5 will be included at least until version 0.7.</p></div></div><h3 id="[InvDataStorage](@ref)"><a class="docs-heading-anchor" href="#[InvDataStorage](@ref)"><a href="../../library/public/#EnergyModelsInvestments.InvDataStorage"><code>InvDataStorage</code></a></a><a id="[InvDataStorage](@ref)-1"></a><a class="docs-heading-anchor-permalink" href="#[InvDataStorage](@ref)" title="Permalink"></a></h3><p><code>InvDataStorage</code> was significantly reworked since version 0.5. The total rework is provided below.</p><p>The previous description for storage investments was given by:</p><pre><code class="language-julia hljs">InvDataStorage(;
    capex_rate::TimeProfile,
    rate_max_inst::TimeProfile,
    rate_max_add::TimeProfile,
    rate_min_add::TimeProfile,
    capex_stor::TimeProfile,
    stor_max_inst::TimeProfile,
    stor_max_add::TimeProfile,
    stor_min_add::TimeProfile,
    inv_mode::Investment = ContinuousInvestment(),
    rate_start::Union{Real, Nothing} = nothing,
    stor_start::Union{Real, Nothing} = nothing,
    rate_increment::TimeProfile = FixedProfile(0),
    stor_increment::TimeProfile = FixedProfile(0),
    life_mode::LifetimeMode = UnlimitedLife(),
    lifetime::TimeProfile = FixedProfile(0),
)</code></pre><p>The new storage investment type is now layered, allowing for different options for the individual capacities given through the fields <code>charge</code>, <code>level</code>, and <code>discharge</code>:</p><pre><code class="language-julia hljs">@kwdef struct StorageInvData &lt;: InvestmentData
    charge::Union{GeneralInvData, Nothing} = nothing
    level::Union{GeneralInvData, Nothing} = nothing
    discharge::Union{GeneralInvData, Nothing} = nothing
end</code></pre><p>The new type, <a href="../../library/public/#EnergyModelsInvestments.GeneralInvData"><code>GeneralInvData</code></a> has at the time being two subtypes, <a href="../../library/public/#EnergyModelsInvestments.NoStartInvData"><code>NoStartInvData</code></a> and <a href="../../library/public/#EnergyModelsInvestments.StartInvData"><code>StartInvData</code></a>, given as:</p><pre><code class="language-julia hljs">@kwdef struct NoStartInvData &lt;: GeneralInvData
    capex::TimeProfile       # Capex to install cap
    max_inst::TimeProfile    # Max installable capacity in one period (in total)
    max_add::TimeProfile     # Max capacity that can be added in one period
    min_add::TimeProfile     # Min capacity that can be added in one period
    inv_mode::Investment = ContinuousInvestment()
    increment::TimeProfile  = FixedProfile(0)
    life_mode::LifetimeMode = UnlimitedLife()
    lifetime::TimeProfile  = FixedProfile(0)
end

@kwdef struct StartInvData &lt;: GeneralInvData
    capex::TimeProfile      # Capex to install cap
    max_inst::TimeProfile   # Max installable capacity in one period (in total)
    max_add::TimeProfile    # Max capacity that can be added in one period
    min_add::TimeProfile    # Min capacity that can be added in one period
    initial::Real           # Initially installed capacity
    inv_mode::Investment = ContinuousInvestment()
    increment::TimeProfile  = FixedProfile(0)
    life_mode::LifetimeMode = UnlimitedLife()
    lifetime::TimeProfile  = FixedProfile(0)
end</code></pre><p>The introduction of two types simplifies the implementation of an initial capacity. Depending on whether you specified in your previous <code>InvDataStorage</code> instance the field <code>rate_start</code> and <code>stor_start</code>, you will have to use either <a href="../../library/public/#EnergyModelsInvestments.NoStartInvData"><code>NoStartInvData</code></a> (not specified) or <a href="../../library/public/#EnergyModelsInvestments.StartInvData"><code>StartInvData</code></a> (specified).</p><p>In addition, if you used the <code>rate</code> variables previously for the charge or discharge rate, you have to adjust the investment data slightly. A <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.RefStorage"><code>RefStorage</code></a> node from <code>EnergyModelsBase</code> would be given then as:</p><pre><code class="language-julia hljs">StorageInvData(
    charge = NoStartInvData(
        capex = capex_rate,
        max_inst = rate_max_inst,
        max_add = rate_max_add,
        min_add = rate_min_add,
        inv_mode = inv_mode,
        increment = rate_increment,
        life_mode = life_mode,
        lifetime = lifetime,
    ),
    level = NoStartInvData(
        capex = capex_stor,
        max_inst = stor_max_inst,
        max_add = stor_max_add,
        min_add = stor_min_add,
        inv_mode = inv_mode,
        increment = stor_increment,
        life_mode = life_mode,
        lifetime = lifetime,
    ),
)</code></pre><p>while a node <a href="https://energymodelsx.github.io/EnergyModelsRenewableProducers.jl/stable/library/public/#EnergyModelsRenewableProducers.HydroStor"><code>HydroStor</code></a> from <code>EnergyModelsRenewableProducers</code>, in which the rate was used for the discharge, would be given then as:</p><pre><code class="language-julia hljs">StorageInvData(
    level = NoStartInvData(
        capex = capex_stor,
        max_inst = stor_max_inst,
        max_add = stor_max_add,
        min_add = stor_min_add,
        inv_mode = inv_mode,
        increment = stor_increment,
        life_mode = life_mode,
        lifetime = lifetime,
    ),
    discharge = NoStartInvData(
        capex = capex_rate,
        max_inst = rate_max_inst,
        max_add = rate_max_add,
        min_add = rate_min_add,
        inv_mode = inv_mode,
        increment = rate_increment,
        life_mode = life_mode,
        lifetime = lifetime,
    ),
)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../manual/NEWS/">« Release notes</a><a class="docs-footer-nextpage" href="../contribute/">Contribute to EnergyModelsInvestments »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Friday 24 May 2024 15:44">Friday 24 May 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
